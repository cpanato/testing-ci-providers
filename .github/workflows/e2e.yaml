on:
  workflow_run:
    workflows:
      - Label-Checker
    types:
      - completed

jobs:
  on-success:
    runs-on: ubuntu-latest
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    steps:
      - name: "Download artifact"
        run: |
          WF_NAME="Label-Checker"
          ARTIFACT_NAME="pr_num.txt"
          RUN_ID=`gh run --repo ${GITHUB_REPOSITORY} list --workflow ${WF_NAME} --json databaseId --jq .[0].databaseId`
          gh run --repo ${GITHUB_REPOSITORY} download ${RUN_ID} -n ${ARTIFACT_NAME}
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

      - run: cat pr_num.txt
